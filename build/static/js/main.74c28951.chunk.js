(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},19:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(13),u=t.n(o),c=(t(19),t(2)),l=t(3),i=t.n(l),s="/api/persons",m=function(){return i.a.get(s).then((function(e){return e.data}))},d=function(e){return i.a.post(s,e).then((function(e){return e.data}))},f=function(e,n){return i.a.put("".concat(s,"/").concat(e),n).then((function(e){return e.data}))},h=function(e){i.a.delete("".concat(s,"/").concat(e))},b=function(e){var n=e.person,t=e.setPersons,a=e.personsToShow,o=e.setMessage;return r.a.createElement("li",null,n.name," ",n.number," ",r.a.createElement("button",{onClick:function(){return p(n,t,a,o)}},"delete"))},p=function(e,n,t,a){console.log(e),!0===window.confirm("Delete ".concat(e.name,"?"))&&(console.log("Poistetaan ".concat(e.name)),h(e.id),n(t.filter((function(n){return n.id!==e.id}))),a("Deleted ".concat(e.name)),setTimeout((function(){a(null)}),5e3))},v=function(e){var n=e.personsToShow,t=e.setPersons,a=e.setMessage;return r.a.createElement("ul",null,n.map((function(e){return r.a.createElement(b,{key:e.name,person:e,setPersons:t,personsToShow:n,setMessage:a})})))},g=function(e){var n=e.addPerson,t=e.newName,a=e.newNumber,o=e.handleNameChange,u=e.handleNumberChange;return r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:t,onChange:o})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:a,onChange:u})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},E=function(e){var n=e.newFilter,t=e.handleFilterChange;return r.a.createElement("div",null,"filter shown with: ",r.a.createElement("input",{value:n,onChange:t}))},w=function(e){var n=e.message;return null===n?null:r.a.createElement("div",{className:"message"},n)},j=function(){var e=Object(a.useState)([]),n=Object(c.a)(e,2),t=n[0],o=n[1],u=Object(a.useState)(""),l=Object(c.a)(u,2),i=l[0],s=l[1],h=Object(a.useState)(""),b=Object(c.a)(h,2),p=b[0],j=b[1],O=Object(a.useState)(!0),C=Object(c.a)(O,2),S=C[0],N=C[1],P=Object(a.useState)(""),k=Object(c.a)(P,2),T=k[0],y=k[1],F=Object(a.useState)(null),M=Object(c.a)(F,2),D=M[0],J=M[1];Object(a.useEffect)((function(){m().then((function(e){o(e)}))}),[]);var L=S?t:t.filter((function(e){return e.name.toLowerCase().match(T.toLowerCase())}));return r.a.createElement("div",null,r.a.createElement("h1",null,"Phonebook"),r.a.createElement(w,{message:D}),r.a.createElement(E,{newFilter:T,handleFilterChange:function(e){""===e.target.value&&N(!0),y(e.target.value),N(!1)}}),r.a.createElement("h2",null,"add a new"),r.a.createElement(g,{addPerson:function(e){e.preventDefault();for(var n={name:i,number:p},a=0;a<t.length;a++)if(n.name===t[a].name){if(n.number===t[a].number)return alert("".concat(n.name," is already added to phonebook")),s(""),void j("");var r=window.confirm("".concat(n.name," is already added to phonebook, replace the old number with a new one?"));if(!0===r){var u={name:t[a].name,number:p};return f(t[a].id,u),s(""),j(""),J("".concat(t[a].name," phone number changed to ").concat(u.number)),void setTimeout((function(){J(null)}),5e3)}if(!1===r)return s(""),void j("")}d(n).then((function(e){console.log(e),o(t.concat(e)),s(""),j(""),J("Added ".concat(e.name)),setTimeout((function(){J(null)}),5e3)}))},newName:i,newNumber:p,handleNameChange:function(e){s(e.target.value)},handleNumberChange:function(e){j(e.target.value)}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(v,{personsToShow:L,setPersons:o,setMessage:J}))};u.a.render(r.a.createElement(j,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.74c28951.chunk.js.map